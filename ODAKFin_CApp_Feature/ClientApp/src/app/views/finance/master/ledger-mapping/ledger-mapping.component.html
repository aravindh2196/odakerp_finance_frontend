<div class="container-fluid">

    <div class="d-flex justify-content-between headtitle mt-2">
        <h4 class="ml-2 mt-2 mb-0">Ledger Mapping</h4>
    </div>

    <div class="row">
        <div class="col-md-9">
            <div class="d-flex">
                <div class="col-md-12 text-right m-0">
                    <button style="margin-top: -80px" type="submit" class="btn btn-success bmd-btn-fab tblbtngap"
                        (click)="saveLedger()"><i class="material-icons editicon">add</i>
                        <div class="ripple-container"></div>
                    </button>
                </div>
            </div>
            <form [formGroup]="ledgerForm">
                <div class="form-group">
                    <div class="row">
                        <div class="col-md-12 card">
                            <div class="row alogtop">
                                <div class="col-md-12 col-sm-12  col-lg-12 col-xl-12 partytbl">
                                    <div class="material-datatables">
                                        <table id="datatable"
                                            class="table table-responsive table-striped table-bordered table-hover"
                                            cellspacing="0">
                                            <thead>
                                                <tr>
                                                    <th>S.No</th>
                                                    <th>Application</th>
                                                    <th>Module</th>
                                                    <th>Sub-Module/Field</th>
                                                    <th>Classification</th>
                                                    <th>Account Mapping </th>
                                                    <th>Updated Date</th>
                                                    <!-- <th>Select</th> -->
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td></td>
                                                    <td>
                                                        <!-- <select formControlName="ApplicationId"
                                                            class="form-control my-select">
                                                            <option disabled value=0>--SELECT--</option>
                                                            <option *ngFor="let group of ledgerApplicationList"
                                                                [value]="group.ID">
                                                                {{group.ApplicationName | uppercase}}
                                                            </option>
                                                        </select> -->
                                                        <ng-select class="searchdropdown"  [clearable]="false" formControlName="ApplicationId">
                                                            <ng-option [value]="0" [disabled]="true">--SELECT--</ng-option>
                                                            <ng-option *ngFor="let group of ledgerApplicationList" [value]="group.ID">
                                                                {{group.ApplicationName | uppercase}}
                                                            </ng-option>
                                                          </ng-select>  
                                                    </td>
                                                    <td>
                                                        <!-- <select formControlName="ModuleId"
                                                            class="form-control my-select">
                                                            <option disabled value=0>--SELECT--</option>
                                                            <option *ngFor="let group of ledgerModuleList"
                                                                [value]="group.ID">
                                                                {{group.ModuleName | uppercase}}
                                                            </option>
                                                        </select> -->
                                                        <ng-select class="searchdropdown"  [clearable]="false" formControlName="ModuleId" (change)="getSubmodule($event)">
                                                            <ng-option [value]="0" [disabled]="true">--SELECT--</ng-option>
                                                            <ng-option *ngFor="let group of ledgerModuleList" [value]="group.ID">
                                                                {{group.ModuleName | uppercase}}
                                                            </ng-option>
                                                          </ng-select>  
                                                    </td>
                                                    <td>

                                                        <!-- <select formControlName="SubModuleId"
                                                            class="form-control my-select">
                                                            <option disabled value=0>--SELECT--</option>
                                                            <option *ngFor="let group of ledgerSubModuleList"
                                                                [value]="group.ID">
                                                                {{group.SubModuleName | uppercase}}
                                                            </option>
                                                        </select> -->
                                                        <ng-select class="searchdropdown"  [clearable]="false" formControlName="SubModuleId" >
                                                            <ng-option [value]="0" [disabled]="true">--SELECT--</ng-option>
                                                            <ng-option *ngFor="let group of ledgerSubModuleList" [value]="group.Id">
                                                                {{group.SubModuleName | uppercase}}
                                                            </ng-option>
                                                          </ng-select>  

                                                    </td>
                                                    <td>
                                                        <!-- <select formControlName="ClassificationId"
                                                            class="form-control my-select">
                                                            <option disabled value=null>--SELECT--</option>
                                                            <option *ngFor="let group of ledgerClassificationList"
                                                                [value]="group.ID">
                                                                {{group.ClassificationName | uppercase}}
                                                            </option>
                                                        </select> -->
                                                        <ng-select class="searchdropdown"  [clearable]="false"  formControlName="ClassificationId" >
                                                            <ng-option [value] = "" [disabled]="true">--SELECT--</ng-option>
                                                            <ng-option [value] = "0" >NA</ng-option>
                                                            <ng-option *ngFor="let group of ledgerClassificationList" [value]="group.ID">
                                                                {{group.ClassificationName | uppercase}}
                                                            </ng-option>
                                                          </ng-select>  
                                                    </td>
                                                    <td>
                                                        <!-- <select formControlName="AccountMappingIds"
                                                            class="form-control my-select">
                                                            <option disabled value=0>--SELECT--</option>
                                                            <option *ngFor="let group of ledgerAccountList"
                                                                [value]="group.ChartOfAccountsId">
                                                                {{group.AccountName | uppercase}}
                                                            </option>
                                                        </select> -->
                                                        <ng-select class="searchdropdown"  [clearable]="false" formControlName="AccountMappingIds" >
                                                            <ng-option [value]="0" [disabled]="true">--SELECT--</ng-option>
                                                            <ng-option *ngFor="let group of ledgerAccountList" [value]="group.ChartOfAccountsId">
                                                                {{group.AccountName | uppercase}}
                                                            </ng-option>
                                                          </ng-select>
                                                    </td>
                                                    <td>
                                                        <mat-form-field class="tillDate mat_date_picker mt-3"   appearance="outline">
                                                            <input matInput (click)="UpdatedDate.open()" readonly  [matDatepicker]="UpdatedDate" [placeholder]="entityDateFormat" formControlName="UpdatedDate">
                                                            <mat-datepicker-toggle matSuffix [for]="UpdatedDate"></mat-datepicker-toggle>
                                                            <mat-datepicker #UpdatedDate></mat-datepicker>
                                                            </mat-form-field>
                                                        <!-- <input formControlName="UpdatedDate" [min]="minDate" type="date"
                                                            class="form-control" name="date"> -->
                                                    </td>
                                                    <!-- <td></td> -->
                                                </tr>
                                                <tr *ngFor="let gRow of pagedItems; let i= index">
                                                    <td> {{i + currentPageNumber}}</td>
                                                    <td class="txtright"> {{gRow.ApplicationName}} </td>
                                                    <td class="txtright"> {{gRow.ModuleName}}</td>
                                                    <td class="txtright"> {{gRow.SubModuleName}}</td>
                                                    <td class="txtright"> {{gRow.ClassificationName ?
                                                        gRow.ClassificationName : 'NA'}}</td>
                                                    <td class="txtright"> {{gRow.AccountMappingName}}</td>
                                                    <td class="txtright"> {{gRow.UpdatedDate | date:commonDataService.convertToLowerCaseDay(entityDateFormat)}}
                                                    </td>
                                                    <!-- <td class="actwid"> </td> -->
                                                </tr>
                                            </tbody>
                                        </table>


                                        <div *ngIf="pagedItems.length > 0" class="row page" align="right">
                                            <ul *ngIf="pager.pages && pager.pages.length && pager.totalItems > 10" class="pagination">
                                                <li [ngClass]="{disabled:pager.currentPage === 1}">
                                                    <a (click)="setPage(1)">First</a>
                                                </li>
                                                <li [ngClass]="{disabled:pager.currentPage === 1}">
                                                    <a (click)="setPage(pager.currentPage - 1)">Previous</a>
                                                </li>
                                                <li *ngFor="let page of pager.pages"
                                                    [ngClass]="{active:pager.currentPage === page}">
                                                    <a (click)="setPage(page);pageChangeEvent(page)">{{page}}</a>
                                                </li>
                                                <li *ngIf="(pager.totalPages - pager.startPage) > 5 ">
                                                    <a (click)="setPage(pager.startPage + 5)">...</a>
                                                </li>
                                                <li *ngIf="(pager.totalPages - pager.startPage) > 5">
                                                    <a (click)="setPage(pager.totalPages)">{{pager.totalPages}}</a>
                                                </li>

                                                <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                                                    <a (click)="setPage(pager.currentPage + 1)">Next</a>
                                                </li>
                                                <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                                                    <a (click)="setPage(pager.totalPages)">Last</a>
                                                </li>
                                            </ul>
                                        </div>

                                    </div>
                                </div>
                            </div>

                            <div class="row alogtop mb-2">
                                <div class="col-md-12 alrt">
                                    <button type="submit" class="btn btn-primary btn-raised btn-default cntbtn mb-0"
                                        (click)="saveLedger()">Save<div class="ripple-container"></div>
                                    </button>
                                    <button (click)="goBack()" type="submit"
                                        class="btn btn-danger btn-raised cntbtn mb-0">Cancel
                                    </button>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </form>

        </div>

        <div class="col-md-3 mt-4">
            <div class="card p-1 pt-4 pb-4 ">
                <form [formGroup]="ledgerFilter" class="mt-1 mb-1">
                    <div class="col-md-12 col-sm-12 col-lg-12 col-xl-12">
                        <div class="form-group bmd-form-group">
                            <!-- <select formControlName="ApplicationId" class="form-control">
                                <option disabled value=0>---SELECT APPLICATION---</option>
                                <option *ngFor="let group of ledgerApplicationList" [value]="group.ID">
                                    {{group.ApplicationName | uppercase}}
                                </option>
                            </select> -->
                            <ng-select class="searchdropdown"  [clearable]="false"  formControlName="ApplicationId" >
                                <ng-option [value]="0" [disabled]="true">--SELECT APPLICATION--</ng-option>
                                <ng-option *ngFor="let group of ledgerApplicationList" [value]="group.ID">
                                    {{group.ApplicationName | uppercase}}
                                </ng-option>
                              </ng-select>
                        </div>
                    </div>

                    <div class="col-md-12 col-sm-12 col-lg-12 col-xl-12">
                        <div class="form-group bmd-form-group">
                            <!-- <select formControlName="ModuleId" class="form-control">
                                <option disabled value=0>---SELECT MODULE---</option>
                                <option *ngFor="let group of ledgerModuleList" [value]="group.ID">
                                    {{group.ModuleName | uppercase}}
                                </option>
                            </select> -->
                            <ng-select class="searchdropdown"  [clearable]="false" formControlName="ModuleId" >
                                <ng-option [value]="0" [disabled]="true">--SELECT MODULE--</ng-option>
                                <ng-option *ngFor="let group of ledgerModuleList" [value]="group.ID">
                                    {{group.ModuleName | uppercase}}
                                </ng-option>
                              </ng-select>
                        </div>
                    </div>

                    <div class="col-md-12 col-sm-12 col-lg-12 col-xl-12">
                        <div class="form-group bmd-form-group">
                            <!-- <select formControlName="SubModuleId" class="form-control">
                                <option disabled value=0>---SELECT SUB-MODULE/FIELD---</option>
                                <option *ngFor="let group of ledgerSubModuleList" [value]="group.ID">
                                    {{group.SubModuleName | uppercase}}
                                </option>
                            </select> -->
                            <ng-select class="searchdropdown"  [clearable]="false" formControlName="SubModuleId" >
                                <ng-option [value]="0" [disabled]="true">--SELECT SUB-MODULE/FIELD--</ng-option>
                                <ng-option *ngFor="let group of ledgerSubModuleList" [value]="group.ID">
                                    {{group.SubModuleName | uppercase}}
                                </ng-option>
                              </ng-select>
                        </div>
                    </div>

                    <div class="col-md-12 col-sm-12 col-lg-12 col-xl-12">
                        <div class="form-group bmd-form-group">
                            <!-- <select formControlName="ClassificationId" class="form-control">
                                <option disabled value=null>---SELECT CLASSIFICATION---</option>
                                <option *ngFor="let group of ledgerClassificationList" [value]="group.ID">
                                    {{group.ClassificationName | uppercase}}
                                </option>
                            </select> -->
                            <ng-select class="searchdropdown"  [clearable]="false" formControlName="ClassificationId" >
                                <ng-option [value]="0" disabled="true">--SELECT CLASSIFICATION--</ng-option>
                                <ng-option *ngFor="let group of ledgerClassificationList" [value]="group.ID">
                                    {{group.ClassificationName | uppercase}}
                                </ng-option>
                              </ng-select>
                        </div>
                    </div>

                    <div class="col-md-12 col-sm-12 col-lg-12 col-xl-12">
                        <div class="form-group bmd-form-group">
                            <!-- <select formControlName="AccountMappingIds" class="form-control">
                                <option disabled value=''>---SELECT ACCOUNT MAPPING---</option>
                                <option *ngFor="let group of ledgerAccountList" [value]="group.ChartOfAccountsId">
                                    {{group.AccountName | uppercase}}
                                </option>
                            </select> -->
                            <ng-select class="searchdropdown"  [clearable]="false" formControlName="AccountMappingIds" >
                                <ng-option [value]="''" [disabled]="true">--SELECT ACCOUNT MAPPING--</ng-option>
                                <ng-option *ngFor="let group of ledgerAccountList" [value]="group.ChartOfAccountsId">
                                    {{group.AccountName | uppercase}}
                                </ng-option>
                              </ng-select>
                        </div>
                    </div>

                    <div class="col-md-12 col-sm-12 col-lg-12 col-xl-12 searchbtn alrt text-center mb-3 mt-3">
                        <button style="padding: 2px 0px !important;width: 40%;font-size: 14px !important;" type="submit"
                            (click)="getLedgerList('search')" class="btn btn-primary btn-raised mb-0">Search<div
                                class="ripple-container"></div>
                        </button>
                        <button style="padding: 2px 0px !important;width: 40%;font-size: 14px !important;"
                            class="btn btn-raised btn-danger mb-0" (click)="getLedgerList();createFilterForm();">Clear
                            <div class="ripple-container">
                            </div>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>